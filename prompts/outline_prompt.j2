Create an explainer video outline for the document: "{{ title }}"

Target: {{ target_segments }} video segments, each approximately {{ duration }} seconds long.

Document chunks:
{{ chunks_text }}
{% if has_images %}

Available PDF Images:
{{ images_text }}

For each segment, you should select the most appropriate image from the available PDF images if one matches well, OR specify a stock image query if no PDF image is suitable.{% endif %}

You must respond with a valid JSON object only. Use the following structure:

{
  "title": "{{ title }}",
  "total_segments": {{ target_segments }},
  "estimated_duration": <total estimated duration in seconds>,
  "segments": [
    {
      "title": "Segment title",
      "purpose": "What this segment explains",
      "key_points": ["Point 1", "Point 2", "Point 3"],
      "visual_keywords": ["keyword1", "keyword2", "keyword3", "keyword4", "keyword5"],
      "duration": <estimated seconds>,
      "image": {
        "source": "pdf" or "stock",
        "query": "<search keywords if stock, null if pdf>",
        "path": "<filepath from available images if pdf, null if stock>"
      }
    }
  ]
}

Image Selection Guidelines:
- If a PDF image matches the segment well (based on label, description, key elements, and relevance), use "source": "pdf" and set "path" to the image's filepath
- If no PDF image is suitable, use "source": "stock" and set "query" to 2-3 search keywords (combine from visual_keywords)
- Set "query" to null for PDF images, set "path" to null for stock images
- Only one image per segment
- Choose images that enhance understanding of the segment content

Guidelines:
1. Start with an engaging introduction segment
2. Build logically from basics to advanced concepts
3. End with a summary or call-to-action segment
4. Each segment should be self-contained but flow naturally
5. Identify 3-5 visual keywords per segment that would make good images/graphics
6. Keep each segment focused on one main idea
7. Return ONLY valid JSON, no markdown code blocks or additional text

